
<head>
 <script src="JQuery/jquery-3.1.0.min.js"></script>
 <link href="css/style.css" rel="stylesheet">
</head>
<body>
<div class = "container">
  <div class="display"></div>

  <div class="result"></div>

  <div class="test"></div>

  <div class="numbers">
    <ul class = "list_number">
      <li> <button type="button" class = "button_number">7</button> </li>
      <li> <button type="button" class = "button_number">8</button></li>
      <li> <button type="button" class = "button_number">9</button></li>
      <li> <button type="button" class = "button">/</button></li>
      <li> <button type="button" class = "button">^2</button></li>
      <li> <button type="button" class = "button">Tan</button></li>
      <li> <button type="button" class = "button">PI</button></li>
    </ul>
  </div>
  <div class="numbers">
    <ul class = "list_number">
      <li> <button type="button" class = "button_number">4</button> </li>
      <li> <button type="button" class = "button_number">5</button></li>
      <li> <button type="button" class = "button_number">6</button></li>
      <li> <button type="button" class = "button">*</button></li>
      <li> <button type="button" class = "button">^</button></li>
      <li> <button type="button" class = "button">Cos</button></li>

    </ul>
  </div>
  <div class="numbers">
    <ul class = "list_number">
      <li> <button type="button" class = "button_number">1</button> </li>
      <li> <button type="button" class = "button_number">2</button></li>
      <li> <button type="button" class = "button_number">3</button></li>
      <li> <button type="button" class = "button">-</button></li>
      <li> <button type="button" class = "button">ANS</button></li>
      <li> <button type="button" class = "button">Sin</button></li>
      <li> <button type="button" class = "button">(</button></li>
      <li> <button type="button" class = "button">)</button></li>

    </ul>
  </div>
  <div class="numbers">
    <ul class = "list_number">
      <li> <button type="button" class = "button">Shift</button></li>
      <li> <button type="button" class = "button">0</button> </li>
      <li> <button type="button" class = "button">.</button></li>
      <li> <button type="button" class = "button">=</button></li>
      <li> <button type="button" class = "button">+</button></li>
      <li> <button type="button" class = "button">(-)</button></li>
      <li> <button type="button" class = "button">CA</button></li>
      <li> <button type="button" class = "button"><-</button></li>



    </ul>
  </div>


</div>
<script>
var len = [];
var count = 0;
var counting_power = 0;
var pattern = "";
var answer = 0;
var whole_epression = "";
var check_equal = "";
var expression_power_2 = "";
 $('button').on('click', function(){

     var temp = "";
     var temp2 = "";
     var str_length = "";
     var i = $(this).text();
     var display = $('.display');
     var result = $('.result');
     var test = $('.test');
     var new_length = 0;
     var C_display = "";
     var answer = 0;

     len.push(i);
     display.text(display.text() + i);
     test.text("");
     result.text("");
    // result.text("Can not start with operator");
     //test.text(test.text() + " Length of arrya is " + len.length  + "Count = "+count+ " Len[count] = " + len[count]);
     //test.text("whole array is " + len);
         // ---------------------------------------------Making sure Tan , sin, Cos got the () they want------------------------------------------------------------
     if (len[count] == "1" || len[count] == "2" || len[count] == "3" || len[count] == "4" || len[count] == "5" || len[count] == "6" || len[count] == "7" || len[count] == "8" || len[count] == "9" ) {
      // test.text("Number is entered and the previous element is " + len[count-1]);
       if (len[count-1] == "Math.sin" || len[count-1] == "Math.tan" || len[count-1] == "Math.cos" ) {

         test.text("Bracklets needed");

         for (var counting = 0; counting < len.length - 1; counting++) {
           whole_epression = whole_epression + len[counting];
         }
         display.text(whole_epression);
         len.pop();
         count = count -1;
         whole_epression = "";

       }
     }

     if (len[0] == "+" || len[0] == "-" || len[0] == "*" || len[0] == "/" || len[0] == "="){
        test.text("Can not start with operator");
        display.text(" ");
        delete len[0];
        len.length = len.length-1;
        count = count -1;
     }
     else if (len[0] == "CA" || len[0] == "<-" ) {
       test.text("Nothing to Clear");
       display.text(" ");
       delete len[0];
       len.length = len.length-1;
       count = count -1;
     }
    // ---------------------------------------------Clear all------------------------------------------------------------
     if (len[count] == "CA") {
       display.text(" ");
       result.text(" ");
       len = [];
       count = -1;

     }
     //.....................................................backpace...................................
    else if (len[count] == "<-") {
      for (var counting = 0; counting < len.length - 2; counting++) {
        whole_epression = whole_epression + len[counting];
      }
        display.text(whole_epression);
        len.pop();
        len.pop();
        count = count -2;
        whole_epression = "";

    }
//.........................................................prevent 2 operators..........................................

     else if (len[count] == "+" || len[count] == "-" || len[count] == "*" || len[count] == "/") {
       if (len[count-1] == "+" || len[count-1] == "-" || len[count-1] == "*" || len[count-1] == "/" ) {
         test.text("Can not put two operator in a row, plz check");
         for (var counting = 0; counting < len.length - 1; counting++) {
           whole_epression = whole_epression + len[counting];
         }
         display.text(whole_epression);
         len.pop();
         count = count -1;
         whole_epression = "";

       }
    // ---------------------------------------------Power of 2 -----------------------------------------------------------
     }
    else if (len[count] == "^2") {

       for (var power = 0; power < len.length ; power++) {
         temp = temp + len[power];
       }

      //temp2 = temp.match(/([(]*[-]*\d+[\.]*\d*[)]*)[\^](\d)/);
       temp2 = temp.match(/[(]*([-]*\d+[\.]*\d*)[)]*[\^](\d)/);
       for (var i = 1; i < temp2.length; i++) {
         expression_power_2 = expression_power_2 + temp2[i];
       }


      for (var i = 0; i < expression_power_2.length -1 ; i++) {
        len.pop();
        count = count-1;
      }


      len[count] = Math.pow(temp2[1],temp2[2]);
      //test.text(" (-) situation, base is  " + temp2[1] + ", expression_power_2 is " + expression_power_2 +", and power of " + temp2[2] + ", array is " + len);
      temp = "";
      temp2 = [];
      expression_power_2 = "";


    }

/*---------------------------------------- Pi, Cos, Sin, Tan -----------------------------------------------------------*/
    else if (len[count] =="PI") {
        len[count] = Math.PI;

      }
    else if (len[count] =="Sin") {
        len[count] = "Math.sin";
      //  test.text("element is " + len[count]);
        test.text("Don't forget the bracklets");
      }
    else if (len[count] =="Cos") {
        len[count] = "Math.cos";
        test.text("Don't forget the bracklets");
      }
    else if (len[count] =="Tan") {
        len[count] = "Math.tan";
        test.text("Don't forget the bracklets");
      }


    // --------------------------------------------- Equal Sign =  ------------------------------------------------------------
    else if (len[count] == "=" ) {
       whole_epression = "";
       if (len[count-1] == "+" || len[count-1] == "-" || len[count-1] == "*" || len[count-1] == "/") {
         result.text("Can not put two operator in a row, plz check");

         for (var counting = 0; counting < len.length - 1; counting++) {
           whole_epression = whole_epression + len[counting];
         }
         display.text(whole_epression);
         len.pop();
         count = count -1;
         whole_epression = "";


       }
       else {
         for (var counting = 0; counting < len.length - 1; counting++) {
           whole_epression = whole_epression + len[counting];
         }
         //test.text("length of array is " + len.length +" and element of array is " + len);
         result.text(eval(whole_epression));


         len = [];
         count = -1;
         display.text(" ");

       }

     }

    // ---------------------------------------------Answer function-----------------------------------------------------------
    else if (len[count] == "ANS") {
       answer = eval(whole_epression);
       len[count] = answer ;
       whole_epression = "";

     }
    // ---------------------------------------------Minus Sign------------------------------------------------------------
    else if (len[count] == "(-)") {
       len[count] = "-";

     }

      count = count + 1;
      //test.text("count is " + count + " before go in to next click");

 });
</script>

</body>
